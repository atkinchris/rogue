{"version":3,"sources":["webpack:///main.050f329c.js","webpack:///webpack/bootstrap 050f329c9f38317b2612","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/index.js","webpack:///./src/utils/store.js","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/v1.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/uuid/v4.js","webpack:///./src/systems/index.js","webpack:///./src/systems/render.js","webpack:///./src/systems/playerControl.js","webpack:///./src/systems/applyMovement.js","webpack:///./src/systems/evaluateMovement.js","webpack:///./src/systems/collision.js","webpack:///./src/systems/cacheCollisions.js","webpack:///./src/assemblages/index.js","webpack:///./src/utils/loop.js","webpack:///./src/utils/inputHandler.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","global","rng","crypto","msCrypto","getRandomValues","rnds8","Uint8Array","rnds","Array","r","Math","random","bytesToUuid","buf","offset","bth","byteToHex","toString","substr","_interopRequireDefault","obj","_store","_store2","_systems","_systems2","_assemblages","_loop","_loop2","_inputHandler","_inputHandler2","store","direction","setCache","type","createPlayer","x","createWall","y","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_uuid","Store","this","entities","components","caches","id","v4","cache","entity","component","state","arguments","_this","keys","filter","every","getComponent","console","log","v1","uuid","options","b","clockseq","_clockseq","msecs","Date","getTime","nsecs","_lastNSecs","dt","_lastMSecs","Error","tl","tmh","node","_nodeId","_seedBytes","g","Function","eval","e","window","ii","_render","_render2","_playerControl","_playerControl2","_applyMovement","_applyMovement2","_evaluateMovement","_evaluateMovement2","_collision","_collision2","_cacheCollisions","_cacheCollisions2","renderSystem","canvas","document","getElementById","context","getContext","getEntitiesWith","clearRect","width","height","forEach","tile","position","font","fillStyle","fillText","character","playerControlSystem","breakLoop","intent","getCache","addComponent","applyMovementSystem","removeComponent","evaluateMovementSystem","_store$getComponent","result","collisionSystem","collisionMap","_defineProperty","_extends","assign","source","cacheCollisions","reduce","map","createEntity","runLoop","systems","loop","iteration","message","warn","system","createInputHandler","callback","handler","event","repeat","code","addEventListener","removeEventListener"],"mappings":"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","file":"main.050f329c.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _store = __webpack_require__(3);\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _systems = __webpack_require__(8);\n\nvar _systems2 = _interopRequireDefault(_systems);\n\nvar _assemblages = __webpack_require__(15);\n\nvar _loop = __webpack_require__(16);\n\nvar _loop2 = _interopRequireDefault(_loop);\n\nvar _inputHandler = __webpack_require__(17);\n\nvar _inputHandler2 = _interopRequireDefault(_inputHandler);\n\n__webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = new _store2.default();\n\n(0, _inputHandler2.default)(function (direction) {\n  store.setCache('playerIntent', { type: 'move', direction: direction });\n  (0, _loop2.default)(store, _systems2.default);\n});\n\n(0, _assemblages.createPlayer)(store);\n\nfor (var x = 0; x < 10; x += 1) {\n  (0, _assemblages.createWall)(store, { x: x, y: 0 });\n  (0, _assemblages.createWall)(store, { x: x, y: 9 });\n}\n\nfor (var y = 1; y < 9; y += 1) {\n  (0, _assemblages.createWall)(store, { x: 0, y: y });\n  (0, _assemblages.createWall)(store, { x: 9, y: y });\n}\n\n(0, _loop2.default)(store, _systems2.default);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _uuid = __webpack_require__(4);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Store = function () {\n  function Store() {\n    _classCallCheck(this, Store);\n\n    this.entities = {};\n    this.components = {};\n    this.caches = {};\n  }\n\n  _createClass(Store, [{\n    key: 'createEntity',\n    value: function createEntity() {\n      var id = (0, _uuid.v4)();\n      this.entities[id] = true;\n\n      return id;\n    }\n  }, {\n    key: 'setCache',\n    value: function setCache(key, cache) {\n      this.caches[key] = cache;\n    }\n  }, {\n    key: 'getCache',\n    value: function getCache(key) {\n      return this.caches[key];\n    }\n  }, {\n    key: 'addComponent',\n    value: function addComponent(entity, component) {\n      var state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      if (!this.components[component]) {\n        this.components[component] = {};\n      }\n\n      this.components[component][entity] = state;\n    }\n  }, {\n    key: 'removeComponent',\n    value: function removeComponent(entity, component) {\n      if (!this.components[component]) {\n        this.components[component] = {};\n      }\n\n      this.components[component][entity] = null;\n    }\n  }, {\n    key: 'getEntitiesWith',\n    value: function getEntitiesWith(components) {\n      var _this = this;\n\n      var allEntities = Object.keys(this.entities);\n\n      return allEntities.filter(function (entity) {\n        return components.every(function (component) {\n          return _this.getComponent(entity, component);\n        });\n      });\n    }\n  }, {\n    key: 'getComponent',\n    value: function getComponent(entity, component) {\n      return this.components[component] && this.components[component][entity];\n    }\n  }, {\n    key: 'debugComponents',\n    value: function debugComponents() {\n      console.log(this.components);\n    }\n  }]);\n\n  return Store;\n}();\n\nexports.default = Store;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar v1 = __webpack_require__(5);\nvar v4 = __webpack_require__(7);\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(0);\nvar bytesToUuid = __webpack_require__(1);\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(0);\nvar bytesToUuid = __webpack_require__(1);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _render = __webpack_require__(9);\n\nvar _render2 = _interopRequireDefault(_render);\n\nvar _playerControl = __webpack_require__(10);\n\nvar _playerControl2 = _interopRequireDefault(_playerControl);\n\nvar _applyMovement = __webpack_require__(11);\n\nvar _applyMovement2 = _interopRequireDefault(_applyMovement);\n\nvar _evaluateMovement = __webpack_require__(12);\n\nvar _evaluateMovement2 = _interopRequireDefault(_evaluateMovement);\n\nvar _collision = __webpack_require__(13);\n\nvar _collision2 = _interopRequireDefault(_collision);\n\nvar _cacheCollisions = __webpack_require__(14);\n\nvar _cacheCollisions2 = _interopRequireDefault(_cacheCollisions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = [(0, _cacheCollisions2.default)(), (0, _playerControl2.default)(), (0, _evaluateMovement2.default)(), (0, _collision2.default)(), (0, _applyMovement2.default)(), (0, _render2.default)()];\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar renderSystem = function renderSystem() {\n  var canvas = document.getElementById('canvas');\n  var context = canvas.getContext('2d');\n\n  return function (store) {\n    var entities = store.getEntitiesWith(['tile', 'position']);\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n    entities.forEach(function (entity) {\n      var tile = store.getComponent(entity, 'tile');\n      var position = store.getComponent(entity, 'position');\n\n      context.font = '20px monospace';\n      context.fillStyle = 'white';\n\n      context.fillText(tile.character, position.x * 20, position.y * 20 + 20);\n    });\n  };\n};\n\nexports.default = renderSystem;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar playerControlSystem = function playerControlSystem() {\n  return function (store, breakLoop) {\n    var intent = store.getCache('playerIntent');\n\n    if (intent && intent.type) {\n      var entities = store.getEntitiesWith(['playerControlled']);\n\n      entities.forEach(function (entity) {\n        switch (intent.type) {\n          case 'move':\n            store.addComponent(entity, 'moveIntent', intent);\n            break;\n          default:\n            breakLoop('Invalid intent from ', entity);\n            break;\n        }\n      });\n    } else {\n      breakLoop('No intent found');\n    }\n\n    store.setCache('playerIntent', null);\n  };\n};\n\nexports.default = playerControlSystem;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar applyMovementSystem = function applyMovementSystem() {\n  return function (store) {\n    var entities = store.getEntitiesWith(['moveIntent', 'position']);\n\n    entities.forEach(function (entity) {\n      var intent = store.getComponent(entity, 'moveIntent');\n\n      store.addComponent(entity, 'position', intent);\n      store.removeComponent(entity, 'moveIntent');\n    });\n  };\n};\n\nexports.default = applyMovementSystem;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar evaluateMovementSystem = function evaluateMovementSystem() {\n  return function (store, breakLoop) {\n    var entities = store.getEntitiesWith(['moveIntent', 'position']);\n\n    entities.forEach(function (entity) {\n      var intent = store.getComponent(entity, 'moveIntent');\n\n      var _store$getComponent = store.getComponent(entity, 'position'),\n          x = _store$getComponent.x,\n          y = _store$getComponent.y;\n\n      var result = { x: x, y: y };\n\n      switch (intent.direction) {\n        case 'down':\n          result.y += 1;\n          break;\n        case 'up':\n          result.y -= 1;\n          break;\n        case 'left':\n          result.x -= 1;\n          break;\n        case 'right':\n          result.x += 1;\n          break;\n        default:\n          breakLoop('Invalid movement direction', entity);\n          break;\n      }\n\n      store.addComponent(entity, 'moveIntent', result);\n    });\n  };\n};\n\nexports.default = evaluateMovementSystem;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar collisionSystem = function collisionSystem() {\n  return function (store) {\n    var entities = store.getEntitiesWith(['moveIntent', 'collides']);\n    var collisionMap = store.getCache('collisions');\n\n    entities.forEach(function (entity) {\n      var _store$getComponent = store.getComponent(entity, 'moveIntent'),\n          x = _store$getComponent.x,\n          y = _store$getComponent.y;\n\n      if (collisionMap[x + ',' + y]) {\n        store.removeComponent(entity, 'moveIntent');\n      }\n    });\n  };\n};\n\nexports.default = collisionSystem;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar cacheCollisions = function cacheCollisions() {\n  return function (store) {\n    var entities = store.getEntitiesWith(['collides', 'position']);\n\n    var collisionMap = entities.reduce(function (map, entity) {\n      var _store$getComponent = store.getComponent(entity, 'position'),\n          x = _store$getComponent.x,\n          y = _store$getComponent.y;\n\n      return _extends({}, map, _defineProperty({}, x + ',' + y, true));\n    }, {});\n\n    store.setCache('collisions', collisionMap);\n  };\n};\n\nexports.default = cacheCollisions;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar createPlayer = function createPlayer(store) {\n  var entity = store.createEntity();\n\n  store.addComponent(entity, 'position', { x: 1, y: 1 });\n  store.addComponent(entity, 'tile', { character: '@' });\n  store.addComponent(entity, 'playerControlled');\n  store.addComponent(entity, 'collides');\n\n  return entity;\n};\n\nvar createWall = function createWall(store, position) {\n  var entity = store.createEntity();\n\n  store.addComponent(entity, 'position', position);\n  store.addComponent(entity, 'tile', { character: '#' });\n  store.addComponent(entity, 'collides');\n\n  return entity;\n};\n\nexports.createPlayer = createPlayer;\nexports.createWall = createWall;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar runLoop = function runLoop(store, systems) {\n  var loop = true;\n  var iteration = 0;\n  var breakLoop = function breakLoop(message) {\n    console.warn(message);\n    loop = false;\n  };\n\n  while (loop) {\n    iteration += 1;\n\n    if (iteration > 10) {\n      breakLoop('Iteration limit reached');\n    }\n\n    systems.forEach(function (system) {\n      return system(store, breakLoop);\n    });\n  }\n};\n\nexports.default = runLoop;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EVENT = 'keydown';\n\nvar createInputHandler = function createInputHandler(callback) {\n  var handler = function handler(event) {\n    if (event && !event.repeat) {\n      switch (event.code) {\n        case 'KeyW':\n        case 'ArrowUp':\n          callback('up');\n          break;\n        case 'KeyS':\n        case 'ArrowDown':\n          callback('down');\n          break;\n        case 'KeyA':\n        case 'ArrowLeft':\n          callback('left');\n          break;\n        case 'KeyD':\n        case 'ArrowRight':\n          callback('right');\n          break;\n        default:\n          break;\n      }\n    }\n  };\n\n  window.addEventListener(EVENT, handler);\n\n  return function () {\n    return window.removeEventListener(EVENT, handler);\n  };\n};\n\nexports.default = createInputHandler;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// main.050f329c.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 050f329c9f38317b2612","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/rng-browser.js\n// module id = 0\n// module chunks = 0","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/bytesToUuid.js\n// module id = 1\n// module chunks = 0","import Store from './utils/store'\nimport systems from './systems'\nimport { createPlayer, createWall } from './assemblages'\nimport runLoop from './utils/loop'\nimport createInputHandler from './utils/inputHandler'\n\nimport './index.css'\n\nconst store = new Store()\n\ncreateInputHandler((direction) => {\n  store.setCache('playerIntent', { type: 'move', direction })\n  runLoop(store, systems)\n})\n\ncreatePlayer(store)\n\nfor (let x = 0; x < 10; x += 1) {\n  createWall(store, { x, y: 0 })\n  createWall(store, { x, y: 9 })\n}\n\nfor (let y = 1; y < 9; y += 1) {\n  createWall(store, { x: 0, y })\n  createWall(store, { x: 9, y })\n}\n\nrunLoop(store, systems)\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { v4 as uuid } from 'uuid'\n\nclass Store {\n  constructor() {\n    this.entities = {}\n    this.components = {}\n    this.caches = {}\n  }\n\n  createEntity() {\n    const id = uuid()\n    this.entities[id] = true\n\n    return id\n  }\n\n  setCache(key, cache) {\n    this.caches[key] = cache\n  }\n\n  getCache(key) {\n    return this.caches[key]\n  }\n\n  addComponent(entity, component, state = true) {\n    if (!this.components[component]) {\n      this.components[component] = {}\n    }\n\n    this.components[component][entity] = state\n  }\n\n  removeComponent(entity, component) {\n    if (!this.components[component]) {\n      this.components[component] = {}\n    }\n\n    this.components[component][entity] = null\n  }\n\n  getEntitiesWith(components) {\n    const allEntities = Object.keys(this.entities)\n\n    return allEntities.filter(entity => (\n      components.every(component => this.getComponent(entity, component))\n    ))\n  }\n\n  getComponent(entity, component) {\n    return this.components[component] && this.components[component][entity]\n  }\n\n  debugComponents() {\n    console.log(this.components)\n  }\n}\n\nexport default Store\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/store.js","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/index.js\n// module id = 4\n// module chunks = 0","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/v1.js\n// module id = 5\n// module chunks = 0","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 6\n// module chunks = 0","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/v4.js\n// module id = 7\n// module chunks = 0","import renderSystem from './render'\nimport playerControlSystem from './playerControl'\nimport applyMovementSystem from './applyMovement'\nimport evaluateMovementSystem from './evaluateMovement'\nimport collisionSystem from './collision'\nimport cacheCollisionsSystem from './cacheCollisions'\n\nexport default [\n  cacheCollisionsSystem(),\n  playerControlSystem(),\n  evaluateMovementSystem(),\n  collisionSystem(),\n  applyMovementSystem(),\n  renderSystem(),\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/index.js","const renderSystem = () => {\n  const canvas = document.getElementById('canvas')\n  const context = canvas.getContext('2d')\n\n  return (store) => {\n    const entities = store.getEntitiesWith(['tile', 'position'])\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height)\n\n    entities.forEach((entity) => {\n      const tile = store.getComponent(entity, 'tile')\n      const position = store.getComponent(entity, 'position')\n\n      context.font = '20px monospace'\n      context.fillStyle = 'white'\n\n      context.fillText(tile.character, position.x * 20, (position.y * 20) + 20)\n    })\n  }\n}\n\nexport default renderSystem\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/render.js","const playerControlSystem = () => (store, breakLoop) => {\n  const intent = store.getCache('playerIntent')\n\n  if (intent && intent.type) {\n    const entities = store.getEntitiesWith(['playerControlled'])\n\n    entities.forEach((entity) => {\n      switch (intent.type) {\n        case 'move':\n          store.addComponent(entity, 'moveIntent', intent)\n          break\n        default:\n          breakLoop('Invalid intent from ', entity)\n          break\n      }\n    })\n  } else {\n    breakLoop('No intent found')\n  }\n\n  store.setCache('playerIntent', null)\n}\n\nexport default playerControlSystem\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/playerControl.js","const applyMovementSystem = () => (store) => {\n  const entities = store.getEntitiesWith(['moveIntent', 'position'])\n\n  entities.forEach((entity) => {\n    const intent = store.getComponent(entity, 'moveIntent')\n\n    store.addComponent(entity, 'position', intent)\n    store.removeComponent(entity, 'moveIntent')\n  })\n}\n\nexport default applyMovementSystem\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/applyMovement.js","const evaluateMovementSystem = () => (store, breakLoop) => {\n  const entities = store.getEntitiesWith(['moveIntent', 'position'])\n\n  entities.forEach((entity) => {\n    const intent = store.getComponent(entity, 'moveIntent')\n    const { x, y } = store.getComponent(entity, 'position')\n    const result = { x, y }\n\n    switch (intent.direction) {\n      case 'down':\n        result.y += 1\n        break\n      case 'up':\n        result.y -= 1\n        break\n      case 'left':\n        result.x -= 1\n        break\n      case 'right':\n        result.x += 1\n        break\n      default:\n        breakLoop('Invalid movement direction', entity)\n        break\n    }\n\n    store.addComponent(entity, 'moveIntent', result)\n  })\n}\n\nexport default evaluateMovementSystem\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/evaluateMovement.js","const collisionSystem = () => (store) => {\n  const entities = store.getEntitiesWith(['moveIntent', 'collides'])\n  const collisionMap = store.getCache('collisions')\n\n  entities.forEach((entity) => {\n    const { x, y } = store.getComponent(entity, 'moveIntent')\n\n    if (collisionMap[`${x},${y}`]) {\n      store.removeComponent(entity, 'moveIntent')\n    }\n  })\n}\n\nexport default collisionSystem\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/collision.js","const cacheCollisions = () => (store) => {\n  const entities = store.getEntitiesWith(['collides', 'position'])\n\n  const collisionMap = entities.reduce((map, entity) => {\n    const { x, y } = store.getComponent(entity, 'position')\n\n    return {\n      ...map,\n      [`${x},${y}`]: true,\n    }\n  }, {})\n\n  store.setCache('collisions', collisionMap)\n}\n\nexport default cacheCollisions\n\n\n\n// WEBPACK FOOTER //\n// ./src/systems/cacheCollisions.js","const createPlayer = (store) => {\n  const entity = store.createEntity()\n\n  store.addComponent(entity, 'position', { x: 1, y: 1 })\n  store.addComponent(entity, 'tile', { character: '@' })\n  store.addComponent(entity, 'playerControlled')\n  store.addComponent(entity, 'collides')\n\n  return entity\n}\n\nconst createWall = (store, position) => {\n  const entity = store.createEntity()\n\n  store.addComponent(entity, 'position', position)\n  store.addComponent(entity, 'tile', { character: '#' })\n  store.addComponent(entity, 'collides')\n\n  return entity\n}\n\nexport {\n  createPlayer,\n  createWall,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assemblages/index.js","const runLoop = (store, systems) => {\n  let loop = true\n  let iteration = 0\n  const breakLoop = (message) => {\n    console.warn(message)\n    loop = false\n  }\n\n  while (loop) {\n    iteration += 1\n\n    if (iteration > 10) {\n      breakLoop('Iteration limit reached')\n    }\n\n    systems.forEach(system => system(store, breakLoop))\n  }\n}\n\nexport default runLoop\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/loop.js","const EVENT = 'keydown'\n\nconst createInputHandler = (callback) => {\n  const handler = (event) => {\n    if (event && !event.repeat) {\n      switch (event.code) {\n        case 'KeyW':\n        case 'ArrowUp':\n          callback('up')\n          break\n        case 'KeyS':\n        case 'ArrowDown':\n          callback('down')\n          break\n        case 'KeyA':\n        case 'ArrowLeft':\n          callback('left')\n          break\n        case 'KeyD':\n        case 'ArrowRight':\n          callback('right')\n          break\n        default:\n          break\n      }\n    }\n  }\n\n  window.addEventListener(EVENT, handler)\n\n  return () => window.removeEventListener(EVENT, handler)\n}\n\nexport default createInputHandler\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/inputHandler.js"],"sourceRoot":""}